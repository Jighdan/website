---
import Layout from "~/layouts/Default.astro";
import { formatDate } from "~/utilities/date";
import { CONTENT_SERVICE, type Note } from "~/services/content";

export const prerender = true;

export async function getStaticPaths() {
  const notes = await CONTENT_SERVICE.getNotes();

  return notes.map((note) => ({
    params: { slug: note.slug },
    props: note,
  }));
}

type Props = Note;

const note = Astro.props;

const seoTitle = `Notes | ${note.title}`;
const date = formatDate(note.date);
---

<Layout title={seoTitle} description={note.description}>
  <div class="flex flex-col gap-4">
    <p class="text-sm text-right self-end">
      <span>written: </span>

      <time datetime={date} class="lowercase">
        {date}
      </time>
    </p>

    <article class="flex flex-col gap-6">
      <h2 class="font-semibold">{note.title}</h2>
      <div class="flex flex-col gap-4" set:html={note.content} />
    </article>
  </div>
</Layout>

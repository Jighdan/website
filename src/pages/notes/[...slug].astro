---
import Layout from '~/layouts/Default.astro';
import { formatDate } from '~/utilities/date';
import { NOTES_SERVICE, type Note } from '~/services/notes';

export const prerender = true;

export async function getStaticPaths() {
	const notes = await NOTES_SERVICE.getAll();

	return notes.map(note => ({
		params: { slug: note.slug },
		props: note
	}))
}

type Props = Note;

const note = Astro.props;

const seoTitle = `Notes | ${note.title}`;
const date = formatDate(note.date);
---

<Layout title={seoTitle}
description={note.description}>
	<article class="flex flex-col gap-6">
		<div class="flex flex-col gap-2">
			<h5>{date}</h5>	

			<h2 class="font-semibold">{note.title}</h2>
		</div>

	   <div class="flex flex-col gap-4" set:html={note.content} />
	</article>
</Layout>

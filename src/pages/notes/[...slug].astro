---
import { type CollectionEntry, getCollection } from 'astro:content';
import { AstroSeo } from '@astrolib/seo';
import Layout from '~/layouts/Default.astro';
import {formatDate} from '~/utilities/date';

export async function getStaticPaths() {
	const notes = await getCollection('notes');
	return notes.map((note) => ({
		params: { slug: note.slug },
		props: note,
	}));
}

type Props = CollectionEntry<'notes'>;

const note = Astro.props;
const { Content } = await note.render();

const seoTitle = `Notes | ${note.data.title}`;
const date = formatDate(note.data.createdAt);
---

<Layout>
    <AstroSeo
        title={seoTitle}
        description={note.data.description}
        slot='seo'
    />

	<article class="flex flex-col gap-6">
		<div class="flex flex-col gap-2">
			<h5>{date}</h5>	

			<h1 class="font-semibold">{note.data.title}</h1>
		</div>

	   <div class="flex flex-col gap-4">
				<Content />
				</div>
	</article>
</Layout>
